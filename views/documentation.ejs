<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title><%= title %></title>
    <link rel="stylesheet" href="../public/styles.css">
    <script>
        document.addEventListener('DOMContentLoaded', function() {
            const baseUrl = window.location.origin;
            document.querySelectorAll('.api-url').forEach(el => {
                el.textContent = `${baseUrl}${el.getAttribute('data-endpoint')}`;
            });
        });
    </script>
</head>
<body>
    <header>
        <h1><%= title %></h1>
    </header>

    <section>
        <h2>Endpoints</h2>

        <h3>1. Get All Users</h3>
        <p><strong>GET</strong> <code class="api-url" data-endpoint="/users"></code></p>
        <p>Mengambil daftar semua user.</p>
        <pre>
            Response:
            {
                "status": "success",
                "IsSuccess": true,
                "data": [
                    {
                        "id": 1,
                        "username": "john_doe",
                        "email": "john@example.com",
                        "created_at": "2024-01-01T12:00:00Z"
                    }
                ]
            }
        </pre>

        <h3>2. Register User</h3>
        <p><strong>POST</strong> <code class="api-url" data-endpoint="/auth/register"></code></p>
        <p>Mendaftarkan user baru.</p>
        <pre>
            Request Body:
            {
                "username": "john_doe",
                "email": "john@example.com",
                "password": "123456"
            }
            
            Response:
            {
                "status": "success",
                "IsSuccess": true,
                "message": "User berhasil didaftarkan"
            }
        </pre>

        <h3>3. Login</h3>
        <p><strong>POST</strong> <code class="api-url" data-endpoint="/auth/login"></code></p>
        <p>Autentikasi pengguna dan mengembalikan accessToken serta refreshToken.</p>
        <pre>
            Request Body:
            {
                "identifier": "john@example.com", // atau "john_doe"
                "password": "123456"
            }
            
            Response:
            {
                "status": "success",
                "IsValid": true,
                "accessToken": "eyJhbGciOiJIUzI1NiIsInR...",
                "refreshToken": "eyJhbGciOiJIUzI1NiIsInR...",
                "role": "admin",
                "userId": "1",
            }
        </pre>

        <h3>4. Refresh Token</h3>
        <p><strong>POST</strong> <code class="api-url" data-endpoint="/auth/refresh"></code></p>
        <p>Mendapatkan accessToken baru menggunakan refreshToken yang valid.</p>
        <pre>
            Request Body:
            {
                "token": "refreshToken"
            }
            
            Response:
            {
                "status": "success",
                "IsSuccess": true,
                "accessToken": "eyJhbGciOiJIUzI1NiIsInR..."
            }
        </pre>

        <h3>5. Logout</h3>
        <p><strong>POST</strong> <code class="api-url" data-endpoint="/auth/logout"></code></p>
        <p>Menghapus refreshToken dari database dan logout pengguna.</p>
        <pre>
            Response:
            {
                "status": "success",
                "IsSuccess": true,
                "message": "Logout berhasil"
            }
        </pre>

        <h3>6. Edit Profile</h3>
        <p><strong>PUT</strong> <code class="api-url" data-endpoint="/users/edit-profile"></code></p>
        <p>Memperbarui informasi profil pengguna.</p>
        <pre>
            Request Body:
            {
                "address": "Jl. Merdeka No. 123",
                "phoneNumber": "08123456789",
                "birthDate": "1990-05-15"
            }
            
            Response:
            {
                "status": "success",
                "IsSuccess": true,
                "message": "Profil berhasil diperbarui"
            }
        </pre>

        <h3>7. Get User By Identifier</h3>
        <p><strong>GET</strong> <code class="api-url" data-endpoint="/users/:identifier"></code></p>
        <p>Mengambil data user berdasarkan username atau email.</p>
        <pre>
            Response:
            {
                "status": "success",
                "IsSuccess": true,
                "data": {
                    "id": 1,
                    "username": "john_doe",
                    "email": "john@example.com",
                    "password_hash": "$2a$10$WMIPP5B8oae...",
                    "role": "user",
                    "address": "Jl. Merdeka No. 10",
                    "phone_number": "08123456789",
                    "birth_date": "1995-05-20T00:00:00.000Z"
                }
            }
        </pre>

        <h3>8. Update User</h3>
        <p><strong>PUT</strong> <code class="api-url" data-endpoint="/users/edit-user"></code></p>
        <p>Memperbarui username, email, atau password pengguna.</p>
        <pre>
            Request Body:
            {
                "username": "john_doe",
                "email": "john@example.com",
                "oldPassword": "123456",
                "newPassword": "newpassword123"
            }
            
            Response:
            {
                "status": "success",
                "IsSuccess": true,
                "message": "Profile berhasil diperbarui"
            }
        </pre>

        <h3>9. Upload Profile Picture</h3>
        <p><strong>POST</strong> <code class="api-url" data-endpoint="/users/edit-profpic"></code></p>
        <p>Mengunggah gambar profil pengguna.</p>
        <pre>
            Request Body:
            {
                "profilePicture": "file"
            }
            
            Response:
            {
                "status": "success",
                "IsSuccess": true,
                "imageUrl": "https://example.com/path/to/image.jpg"
            }
        </pre>

        <h3>10. Get User Profile Picture</h3>
        <p><strong>GET</strong> <code class="api-url" data-endpoint="/users/profpic"></code></p>
        <p>Mengambil URL gambar profil pengguna.</p>
        <pre>
            Response:
            {
                "status": "success",
                "IsSuccess": true,
                "image_url": "https://example.com/path/to/image.jpg"
            }
        </pre>

        <h3>11. Get All Categories</h3>
        <p><strong>GET</strong> <code class="api-url" data-endpoint="/categories"></code></p>
        <p>Mengambil daftar semua kategori.</p>
        <pre>
            Response:
            {
                "status": "success",
                "IsSuccess": true,
                "data": [
                    {
                        "id": 1,
                        "name": "Electronics",
                        "description": "Devices and gadgets"
                    }
                ]
            }
        </pre>

        <h3>12. Create Category</h3>
        <p><strong>POST</strong> <code class="api-url" data-endpoint="/categories"></code></p>
        <p>Membuat kategori baru.</p>
        <pre>
            Request Body:
            {
                "name": "Electronics",
                "description": "Devices and gadgets"
            }
            
            Response:
            {
                "status": "success",
                "IsSuccess": true,
                "message": "Category berhasil dibuat"
            }
        </pre>

        <h3>13. Update Category</h3>
        <p><strong>PUT</strong> <code class="api-url" data-endpoint="/categories/:id"></code></p>
        <p>Memperbarui kategori berdasarkan ID.</p>
        <pre>
            Request Body:
            {
                "name": "Updated Electronics",
                "description": "Updated description"
            }
            
            Response:
            {
                "status": "success",
                "IsSuccess": true,
                "message": "Category berhasil diperbarui"
            }
        </pre>

        <h3>14. Delete Category</h3>
        <p><strong>DELETE</strong> <code class="api-url" data-endpoint="/categories/:id"></code></p>
        <p>Menghapus kategori berdasarkan ID.</p>
        <pre>
            Response:
            {
                "status": "success",
                "IsSuccess": true,
                "message": "Category berhasil dihapus"
            }
        </pre>
    </section>

    <footer>
        <p>&copy; 2025 API Documentation</p>
    </footer>
</body>
</html>