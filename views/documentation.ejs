<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title><%= title %></title>
    <link rel="stylesheet" href="../public/styles.css">
    <script>
        document.addEventListener('DOMContentLoaded', function() {
            const baseUrl = window.location.origin;
            document.querySelectorAll('.api-url').forEach(el => {
                el.textContent = `${baseUrl}${el.dataset.endpoint}`;
            });
        });
    </script>
</head>
<body>
    <header>
        <h1><%= title %></h1>
    </header>

    <section>
        <h2>Endpoints</h2>

        <h3>1. Register User</h3>
        <p><strong>POST</strong> <code class="api-url" data-endpoint="/auth/register"></code></p>
        <p>Endpoint untuk mendaftarkan user baru.</p>
        <pre>
            Request Body:
            {
                "username": "john_doe",
                "email": "john@example.com",
                "password": "123456",
                "role": "user"
            }
        </pre>

        <h3>2. Login User</h3>
        <p><strong>POST</strong> <code class="api-url" data-endpoint="/auth/login"></code></p>
        <p>Endpoint untuk login user dan mendapatkan access token.</p>
        <pre>
            Request Body:
            {
                "identifier": "john@example.com",
                "password": "123456"
            }
        </pre>
        <pre>
            Response:
            {
                "accessToken": "your_access_token_here",
                "refreshToken": "your_refresh_token_here"
            }
        </pre>

        <h3>3. Refresh Token</h3>
        <p><strong>POST</strong> <code class="api-url" data-endpoint="/auth/refresh-token"></code></p>
        <p>Endpoint untuk mendapatkan access token baru menggunakan refresh token.</p>
        <pre>
            Request Body:
            {
                "token": "your_refresh_token_here"
            }
        </pre>
        <pre>
            Response:
            {
                "accessToken": "your_new_access_token_here"
            }
        </pre>

        <h3>4. Get All Users (Admin Only)</h3>
        <p><strong>GET</strong> <code class="api-url" data-endpoint="/users"></code></p>
        <p>Endpoint ini hanya bisa diakses oleh admin.</p>
        <pre>
            Headers:
            {
                "Authorization": "Bearer your_access_token_here"
            }
        </pre>
        <pre>
            Response:
            [
                {
                    "id": 1,
                    "username": "admin123",
                    "email": "admin@example.com",
                    "role": "admin"
                }
            ]
        </pre>
    </section>

    <footer>
        <p>&copy; 2025 API Documentation</p>
    </footer>
</body>
</html>
